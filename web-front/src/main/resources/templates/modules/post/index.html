<!DOCTYPE HTML>
<html xmlns:th="http://www.thymeleaf.org"
		xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
		layout:decorate="~{layouts/layout}">
<head layout:fragment="~{layouts/layout::header}" >
	<title>投稿詳細｜Sample</title>
</head>
<body>
	<div layout:fragment="content" th:object="${post}" >
		<div class="content" id="content" th:data-id="*{postId}">
			<main id="detail">
				<h1>{{title}}</h1>
				<p>{{registTimeYYYYMMDD}}</p>
				<div class="photo" >
					<img src="/thumb/sample.jpg" class="photo"/>
				</div>
				<p v-html="text"></p>
			</main>
		</div>
	</div>
	<div layout:fragment="scripts">
		<script type="text/javascript" th:inline="javascript">
		var myVueapp = new Vue({
			el:"#content",
			data:{
				url: null,
				data: null,
				registTimeYYYYMMDD: null,
				text: null
			},
			created () {
			},
			mounted () {
				this.url = '/api/v1/post/' + $('#content').data('id') + '/';
			},
			watch: {
				url: function (val) {
					(async () => {
						var res = await axios.get(this.url);
						var data = res.data.data[0];
						this.title = data.title;
						this.registTimeYYYYMMDD = data.registTimeYYYYMMDD;
						this.text = data.text.replace(/\n/g, '<br/>');
					})();
				},
			}
			})
		</script>
	</div>
</body>
</html>
